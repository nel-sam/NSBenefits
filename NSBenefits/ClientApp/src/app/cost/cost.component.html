<mat-form-field class="employee-select">
  <mat-label>Select an employee</mat-label>
  <mat-select [(value)]="selectedEmployee" (valueChange)="calculateCost($event)">
    <mat-option *ngFor="let employee of employees$ | async" [value]="employee">
      {{ employee.firstName }} {{ employee.lastName }}
    </mat-option>
  </mat-select>
</mat-form-field>

<mat-card
  *ngIf="selectedEmployee"
  class="main-section">
  <mat-card-header>
    <mat-card-title>
      {{ selectedEmployee.firstName }} {{ selectedEmployee.lastName }}
    </mat-card-title>
    <mat-card-subtitle>Benefits cost analysis</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content class="content-section">
    <app-chart
      [salary]="selectedEmployee.salary"
      [totalCostPerPayPeriod]="totalCostPerPayPeriod">
    </app-chart>

    <div class="cost-breakdown">
      <h2>Cost Breakdown</h2>
      <table class="cost-table table">
        <tr class="cost-table-row">
          <td>
            Employee
            <mat-icon
              *ngIf="employeeDiscountApplied"
              class="checkmark"
              matTooltip="Employee discount applied because the employee's name begins with 'A'">
              check_circle_outline
            </mat-icon>
          </td>
          <td>{{ employeeCost | currency}}</td>
        </tr>
        <tr
          *ngFor="let dependent of selectedEmployee.dependents"
          class="cost-table-row">
          <td>
            {{ dependent.firstName }} {{ dependent.lastName }}
            <mat-icon
              *ngIf="dependent.discountApplies"
              class="checkmark"
              matTooltip="Dependent discount applied because the dependent's name begins with 'A'">
              check_circle_outline
            </mat-icon>
          </td>
          <td>{{ dependentCost | currency }}</td>
        </tr>
      </table>

      <table class="table">
        <tr>
          <th>Totals</th>
        </tr>
        <tr class="cost-table-row">
          <td>Per pay period</td>
          <td>{{ totalCostPerPayPeriod | currency }}</td>
        </tr>
        <tr class="cost-table-row">
          <td>Per year</td>
          <td>{{ totalYearlyCost | currency }}</td>
        </tr>
      </table>
    </div>
  </mat-card-content>
</mat-card>
